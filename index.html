<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Cloud Check Printing â€“ INTERMID</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Your global CSS -->
    <link rel="stylesheet" href="home.css" />

    <!-- Floating tools CSS (your file) -->
    <link rel="stylesheet" href="floatingtools.css" />

    <!-- Font Awesome for footer icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        background-color: #f4e2d3; /* same as hero bg */
      }
    </style>
  </head>

  <body>
    <div class="home-root">
      <!-- ðŸ”¹ Shared header from header.html -->
      <div include-html="header.html"></div>

      <!-- ðŸ”¸ HERO / main content -->
      <main class="home-hero">
        <div class="home-container home-hero-inner">
          <div class="home-copy">
            <p class="home-tagline">Cloud check printing software</p>

            <h1 class="home-title">
              Prepare. Approve. <span>Print.</span>
            </h1>

            <p class="home-subtitle">
              A modern, cloud-based platform for secure check preparation,
              manager approvals, automatic receivable slips and full check
              history from any device, using any bank layout or printer.
            </p>

            <a href="cheque_bbk.html" class="home-cta">Get Started</a>

            <p class="home-footnote">
              Works on Windows, Mac, Android and iOS. Multi-user roles for
              Admin, Manager and Staff.
            </p>
          </div>

          <div class="home-visual">
            <img
              src="img/home-desk-printer.gif"
              alt="Check printing workspace"
              class="home-visual-img"
            />
          </div>
        </div>
      </main>

      <!-- ðŸ”» Shared footer from footer.html -->
      <div include-html="footer.html"></div>
    </div>

    <!-- ðŸ”¸ Floating tools snippet (WhatsApp + AI agent) -->
    <div include-html="floatingtools.html"></div>

    <script>
      // =============== FOOTER CONTROLS (same as before) ===============
      function initFooterControls() {
        let zoom = 1.0;
        const ZOOM_STEP = 0.1;
        const MAX_ZOOM = 1.8;
        const MIN_ZOOM = 0.7;

        function applyZoom() {
          document.body.style.zoom = zoom;
        }

        function toggleContrast() {
          document.body.classList.toggle("high-contrast");
        }

        function toggleLayout() {
          document.body.classList.toggle("wide-layout");
        }

        const btnPlus = document.getElementById("btn-font-plus");
        const btnMinus = document.getElementById("btn-font-minus");
        const btnContrast = document.getElementById("btn-contrast");
        const btnLayout = document.getElementById("btn-layout");

        if (btnPlus) {
          btnPlus.addEventListener("click", function () {
            zoom = Math.min(MAX_ZOOM, zoom + ZOOM_STEP);
            applyZoom();
          });
        }

        if (btnMinus) {
          btnMinus.addEventListener("click", function () {
            zoom = Math.max(MIN_ZOOM, zoom - ZOOM_STEP);
            applyZoom();
          });
        }

        if (btnContrast) {
          btnContrast.addEventListener("click", function () {
            toggleContrast();
          });
        }

        if (btnLayout) {
          btnLayout.addEventListener("click", function () {
            toggleLayout();
          });
        }
      }

      // =============== NEW: FLOATING TOOLS (AI agent open/close) ===============
      function initFloatingTools() {
        // Root container inserted from floatingtools.html
        const root = document.querySelector(".floating-tools-root");
        if (!root) return;

        const agentBtn = root.querySelector(".floating-btn--agent");
        const panel = root.querySelector(".agent-panel");
        const closeBtn = root.querySelector(".agent-close");

        if (!agentBtn || !panel) return;

        // make sure it's hidden initially
        if (!panel.style.display) {
          panel.style.display = "none";
        }

        agentBtn.addEventListener("click", function () {
          panel.style.display = panel.style.display === "none" ? "flex" : "none";
        });

        if (closeBtn) {
          closeBtn.addEventListener("click", function () {
            panel.style.display = "none";
          });
        }
      }

      // =============== Generic include for header/footer/floating ===============
      function includeHTML(callback) {
        const elements = document.querySelectorAll("[include-html]");
        let remaining = elements.length;

        if (!remaining) {
          if (typeof callback === "function") callback();
          return;
        }

        elements.forEach((el) => {
          const file = el.getAttribute("include-html");
          fetch(file)
            .then((res) => {
              if (!res.ok) throw new Error("Include failed: " + file);
              return res.text();
            })
            .then((html) => {
              el.innerHTML = html;
            })
            .catch((err) => {
              el.innerHTML =
                "<p style='color:red;text-align:center;'>Error loading " +
                file +
                "</p>";
              console.error(err);
            })
            .finally(() => {
              remaining--;
              if (remaining === 0 && typeof callback === "function") {
                callback();
              }
            });
        });
      }

      // When DOM ready: load partials, then init footer + floating tools
      document.addEventListener("DOMContentLoaded", function () {
        includeHTML(function () {
          initFooterControls();
          initFloatingTools(); // ðŸ‘ˆ this makes AI agent icon clickable
        });
      });
    </script>
  </body>
</html>
